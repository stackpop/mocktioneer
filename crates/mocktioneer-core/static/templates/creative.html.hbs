<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mocktioneer {{W}}x{{H}}</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      a {
        display: block;
        border: 0;
        text-decoration: none;
        color: inherit;
      }
      .container {
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      .creative-img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        display: block;
      }
      .sig-badge {
        position: absolute;
        bottom: 0;
        right: 0;
        font-size: 9px;
        padding: 1px 6px;
        color: #fff;
        pointer-events: none;
        z-index: 1;
        font-family: system-ui, sans-serif;
        display: none;
      }
    </style>
  </head>
  <body>
    <a
      id="clk"
      href="//{{HOST}}/click"
      target="_blank"
      class="container"
      aria-label="Open mocktioneer {{W}} by {{H}} creative"
    >
      <img
        id="creative-img"
        class="creative-img"
        src="//{{HOST}}/static/img/{{W}}x{{H}}.svg"
        alt="mocktioneer {{W}}x{{H}}"
      />
    </a>
    <div id="sig-badge" class="sig-badge" aria-hidden="true"></div>
    {{#if PIXEL_HTML}}
    <img
      src="//{{HOST}}/pixel?pid={{PID_HTML}}"
      data-static-pid="{{PID_HTML}}"
      width="1"
      height="1"
      alt=""
      aria-hidden="true"
      referrerpolicy="no-referrer"
      style="position:absolute;left:-9999px;top:-9999px;border:0;width:1px;height:1px"
    />
    {{/if}}
    <script>
      (function () {
        var p = new URLSearchParams(location.search),
          c = p.get("crid") || "",
          sig = p.get("sig") || "";
        // Wire click-through with creative metadata so the landing can echo it
        document.getElementById("clk").href =
          "//{{HOST}}/click?crid=" + encodeURIComponent(c) + "&w={{W}}&h={{H}}";

        // Render signature verification badge if sig param is present
        if (sig) {
          var badge = document.getElementById("sig-badge");
          var badges = {
            verified: { bg: "rgba(0,128,0,.85)", text: "\u2714\uFE0E Request signature verified" },
            failed: { bg: "rgba(200,0,0,.85)", text: "\u274C Request signature not verified" },
            not_present: { bg: "rgba(128,128,128,.75)", text: "\u2014 No signature present" }
          };
          var info = badges[sig];
          if (info && badge) {
            badge.style.background = info.bg;
            badge.textContent = info.text;
            badge.style.display = "block";
          }
        }
      })();
    </script>
    {{#if PIXEL_JS}}
    <script>
      (function () {
        // Fire an additional JS pixel with a distinct PID for analytics parity
        var jsPid = "{{PID_JS}}";
        var trackingImg = new Image();
        trackingImg.src = "//{{HOST}}/pixel?pid=" + encodeURIComponent(jsPid);
        trackingImg.width = trackingImg.height = 1;
        trackingImg.alt = "";
        trackingImg.setAttribute("aria-hidden", "true");
        trackingImg.referrerPolicy = "no-referrer";
        trackingImg.style.cssText =
          "position:absolute;left:-9999px;top:-9999px;border:0;width:1px;height:1px";
        document.body.appendChild(trackingImg);
      })();
    </script>
    {{/if}}
  </body>
  </html>
